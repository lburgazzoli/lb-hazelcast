// *****************************************************************************
//
// *****************************************************************************

subprojects {
    apply plugin: 'java'
    apply plugin: 'osgi'
    apply plugin: 'maven'

    version      = '1.0.0.SNAPSHOT'
    group        = 'com.github.lburgazzoli'

    project.ext.slf4jVersion              = '1.7.5'
    project.ext.log4jVersion              = '1.2.17'
    project.ext.jacksonVersion            = '2.3.1'
    project.ext.jacksonAnnotationsVersion = '2.3.0'
    project.ext.openhftLangVersion        = '6.1.3'
    project.ext.openhftChronicleVersion   = '2.0.2'
    project.ext.hazelcastVersion          = '3.1.3'
    project.ext.osgiVersion               = '5.0.0'
    project.ext.guavaVersion              = '15.0'
    project.ext.axonVersion               = '2.0.8'
    project.ext.junitVersion              = '4.11'
    project.ext.felixVersion              = '4.2.1'
    project.ext.paxExamVersion            = '3.4.0'
    project.ext.paxUrlVersion             = '1.6.0'
    
    repositories {
        maven { url 'http://repo1.maven.org/maven2' }
        maven { url 'http://repo2.maven.org/maven2' }
        maven { url 'http://repo.springsource.org/release' }
        maven { url 'http://repository.springsource.com/maven/bundles/release' }
        maven { url 'http://repository.springsource.com/maven/bundles/external' }
        maven { url 'https://oss.sonatype.org/content/repositories/releases' }

        mavenLocal()

        maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
    }

    dependencies {
        compile 'org.apache.commons:commons-lang3:3.1'
        compile 'commons-beanutils:commons-beanutils:1.8.3'
        compile 'org.slf4j:slf4j-api:1.7.5'
        compile 'org.slf4j:slf4j-ext:1.7.5'
        compile 'org.slf4j:jul-to-slf4j:1.7.5'
        compile 'org.slf4j:jcl-over-slf4j:1.7.5'
        compile 'org.slf4j:slf4j-log4j12:1.7.5'
        compile 'log4j:log4j:1.2.17'
        compile 'com.google.guava:guava:15.0'
        compile 'com.hazelcast:hazelcast:3.1.5'
        compile 'com.fasterxml.jackson.core:jackson-core:2.3.&'
        compile 'com.fasterxml.jackson.core:jackson-databind:2.3.1'
        compile 'com.fasterxml.jackson.core:jackson-annotations:2.3.0'
        compile 'com.fasterxml.jackson.dataformat:jackson-dataformat-smile:2.3.1'
        compile 'com.fasterxml.jackson.module:jackson-module-afterburner:2.3.1'
        compile 'com.nebhale.jsonpath:jsonpath:1.2'
        compile "net.openhft:lang:$openhftLangVersion"
        compile "net.openhft:chronicle:$openhftChronicleVersion"
    }

    [compileJava, compileTestJava]*.options*.compilerArgs = [
        "-Xlint:unchecked",
        "-Xlint:deprecation"
    ]

    jar {
        baseName = "${project.name}"

        manifest.attributes['Bundle-Description'     ] = "lb :: ${project.name}"
        manifest.attributes['Bundle-Name'            ] = "lb :: ${project.name}"
        manifest.attributes['Bundle-SymbolicName'    ] = "${project.group}.${project.name}"
        manifest.attributes['Bundle-Version'         ] = project.version
        manifest.attributes['Implementation-Title'   ] = "${project.group}-${project.name}-${project.version}"
        manifest.attributes['Implementation-Version' ] = project.version
        manifest.attributes['Implementation-Vendor'  ] = 'lb'

        manifest.classesDir = new File("$buildDir/classes/main")
        manifest.classpath  = project.runtimeClasspath
    }
}

// *****************************************************************************
//
// *****************************************************************************

task wrapper(type: Wrapper) {
    gradleVersion = '1.10'
}
